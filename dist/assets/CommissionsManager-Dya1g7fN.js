import{j as e,P as p,T as D,B as j,r as b,C as k,X as w}from"./index-PA-U-bDe.js";import{u as $}from"./useCommissions-DoETA6jE.js";import{H as S}from"./hash-DoJy8IHh.js";import{C as F}from"./credit-card-CEXKdCC6.js";import{C as N}from"./calendar-CXFftYpA.js";import{F as T}from"./filter-DdEsn0sG.js";const R=({commissionsData:t,loading:o=!1,error:a})=>{const i=r=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(r),c=r=>r?new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",h=()=>{const r=t.reduce((l,x)=>l+x.totalCommissions,0),n=t.reduce((l,x)=>l+x.transferCount,0);return{totalCommissions:r,totalTransfers:n}},{totalCommissions:f,totalTransfers:d}=h();return o?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Chargement des commissions..."})]}):a?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"h-6 w-6 text-red-500"})}),e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Erreur lors du chargement"}),e.jsx("p",{className:"text-sm text-gray-500",children:a})]}):t.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"h-8 w-8 text-gray-300"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Aucune commission trouvée"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Les commissions apparaîtront ici"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(D,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Total Commissions"}),e.jsx("p",{className:"text-sm text-green-700",children:"Tous comptes"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:i(f)})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(j,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Comptes Actifs"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Avec commissions"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:t.length})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 border border-purple-200 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(S,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Total Transferts"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Avec commissions"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-700",children:d})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(p,{className:"h-4 w-4 text-green-600"})}),"Relevé des Commissions par Compte",e.jsxs("span",{className:"ml-3 px-2 py-1 bg-green-100 text-green-700 rounded-full text-sm font-semibold",children:[t.length," compte",t.length>1?"s":""]})]})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compte"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RIB"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Commissions"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nb. Transferts"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dernier Transfert"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map((r,n)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mr-4 ${n===0?"bg-yellow-100":"bg-blue-100"}`,children:e.jsx(j,{className:`h-5 w-5 ${n===0?"text-yellow-600":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-base font-semibold text-gray-900 flex items-center",children:[r.company.name,n===0&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Top Compte"})]}),r.company.address&&e.jsx("div",{className:"text-sm text-gray-500",children:r.company.address})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm font-mono text-gray-900",children:r.company.rib})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("div",{className:"text-lg font-bold text-green-600",children:i(r.totalCommissions)})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[r.transferCount," transfert",r.transferCount>1?"s":""]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(N,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:c(r.lastTransferDate)})]})})]},r.company.id))})]})}),e.jsx("div",{className:"lg:hidden divide-y divide-gray-100",children:t.map((r,n)=>e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mr-4 ${n===0?"bg-yellow-100":"bg-blue-100"}`,children:e.jsx(j,{className:`h-6 w-6 ${n===0?"text-yellow-600":"text-blue-600"}`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:r.company.name}),n===0&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Top"})]}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:r.company.rib})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Commissions:"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:i(r.totalCommissions)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Transferts:"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:r.transferCount})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Dernier:"}),e.jsx("span",{className:"text-sm text-gray-900",children:c(r.lastTransferDate)})]})]})]},r.company.id))})]})]})},B=()=>{const[t,o]=b.useState(()=>{const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-01`}),[a,i]=b.useState(()=>{const s=new Date,m=new Date(s.getFullYear(),s.getMonth()+1,0).getDate();return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(m).padStart(2,"0")}`}),{commissionsData:c,loading:h,error:f}=$(t,a),[d,r]=b.useState(!1),l=(()=>{if(!t&&!a)return"Toutes les données";const s=(u,C=!1)=>C?new Date(u).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):new Date(u).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}),m=()=>t&&a?t===a?`${s(t,!0)}`:`${s(t,!0)} - ${s(a,!0)}`:t?`À partir du ${s(t,!0)}`:a?`Jusqu'au ${s(a,!0)}`:"Période personnalisée",g=()=>t&&a?t===a?`Le ${s(t)}`:`Du ${s(t)} au ${s(a)}`:t?`À partir du ${s(t)}`:a?`Jusqu'au ${s(a)}`:"Période personnalisée";return{mobile:m(),desktop:g()}})(),x=()=>{const s=new Date,m=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-01`,g=new Date(s.getFullYear(),s.getMonth()+1,0).getDate(),u=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(g).padStart(2,"0")}`;o(m),i(u)},y=()=>{o(""),i("")},v=()=>{r(!d)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Commissions"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Suivi des commissions perçues par compte"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 max-w-full min-w-0 overflow-hidden",children:[e.jsxs("button",{onClick:v,className:"w-full p-6 flex items-center justify-between text-left hover:bg-gray-50 transition-colors min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 min-w-0 flex-shrink",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Filtrer par période"}),e.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[c.length," compte",c.length>1?"s":""," avec commission",c.length>1?"s":""]})]})]}),e.jsx(k,{className:`h-6 w-6 text-gray-400 transition-transform flex-shrink-0 ${d?"rotate-180":""}`})]}),d&&e.jsx("div",{className:"px-6 pb-6 space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between space-y-4 lg:space-y-0 min-w-0",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"hidden md:block text-sm text-gray-600 break-words",children:typeof l=="object"?l.desktop:l}),e.jsx("p",{className:"md:hidden text-sm text-gray-600 break-words",children:typeof l=="object"?l.mobile:l})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-end space-y-2 sm:space-y-0 sm:space-x-1 w-full sm:w-auto max-w-full min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-1 w-full sm:w-auto max-w-full min-w-0",children:[e.jsxs("div",{className:"flex flex-col w-20 sm:w-24 max-w-full min-w-0",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 truncate",children:"Début"}),e.jsx("input",{type:"date",value:t,onChange:s=>o(s.target.value),className:"px-1 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white text-xs w-full min-w-0 max-w-full"})]}),e.jsxs("div",{className:"flex flex-col w-20 sm:w-24 max-w-full min-w-0",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 truncate",children:"Fin"}),e.jsx("input",{type:"date",value:a,onChange:s=>i(s.target.value),className:"px-1 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white text-xs w-full min-w-0 max-w-full"})]})]}),e.jsxs("div",{className:"flex space-x-1 w-full sm:w-auto",children:[e.jsx("button",{onClick:x,className:"flex-1 sm:flex-none px-1 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors font-medium whitespace-nowrap",children:"Ce mois"}),e.jsxs("button",{onClick:y,className:"flex-1 sm:flex-none px-1 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors font-medium flex items-center justify-center whitespace-nowrap",children:[e.jsx(w,{className:"h-3 w-3"}),"Effacer"]})]})]})]})})]}),(t||a)&&d&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 max-w-full min-w-0 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-1 w-full sm:w-auto max-w-full min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx(N,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-green-900",children:"Période active"}),e.jsx("p",{className:"hidden md:block text-xs text-green-700 break-words",children:typeof l=="object"?l.desktop:l}),e.jsx("p",{className:"md:hidden text-xs text-green-700 break-words",children:typeof l=="object"?l.mobile:l})]})]}),e.jsx("button",{onClick:y,className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-100 rounded-lg transition-colors flex-shrink-0",title:"Supprimer le filtre",children:e.jsx(w,{className:"h-4 w-4"})})]})}),e.jsx(R,{commissionsData:c,loading:h,error:f})]})};export{B as default};
